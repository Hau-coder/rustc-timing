commit ac5046cf67e51df286e7c8df02d67c302d4c4d09
Merge: 139d741 7cb2040
Author: bors <bors@rust-lang.org>
Date:   Thu Jan 12 14:42:02 2017 +0000

    Auto merge of #38779 - Craig-Macomber:bench, r=alexcrichton
    
    Do not run outer setup part of benchmarks multiple times to fix issue 20142
    
    Fix #20142
    
    This is my first real rust code, so I expect the quality is quite bad. Please let me know in which ways it is horrible and I'll fix it.
    
    Previously the whole benchmark function was rerun many times, but with this change, only the callback passed to iter is rerun. This improves performances by saving benchmark startup time. The setup used to be called a minimum of 101 times, and now only runs once.
    
    I wasn't sure exactly what should be done for the case where iter is never called, so I left a FIXME for that: currently it does not error, and I added tests to cover that.
    
    I have left the algorithm and statistics unchanged: I don't like how the minimum number of runs is 301 (that's bad for very slow benchmarks) but I consider such changes out of scope for this fix.
rustc 1.15.0-nightly (daf8c1dfc 2016-12-05)
-rwxr-xr-x 1 root root 9432 Dec  6 15:39 /usr/local/bin/rustc
rustc: ./issue-32278-big-array-of-strings
cargo rustc  -- -Ztime-passes -Zinput-stats
makefile:4: recipe for target 'all' failed
done
