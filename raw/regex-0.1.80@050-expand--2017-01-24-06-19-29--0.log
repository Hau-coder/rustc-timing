commit d2d8ae6575281e92a58899fb8f8c51fc8f84de04
Merge: 65b17f5 469ecef
Author: bors <bors@rust-lang.org>
Date:   Tue Jan 24 11:51:34 2017 +0000

    Auto merge of #39214 - estebank:fix-labels-without-msg, r=nikomatsakis
    
    Fix multiple labels when some don't have message
    
    The diagnostic emitter now accounts for labels with no text message, presenting the underline on its own, without drawing the line for the non existing message below it. Go from
    
    ```
    error: foo
     --> test.rs:3:6
      |
    3 |   a { b { c } d }
      |   ----^^^^^^^----
      |   |   |
      |   |   `b` is a good letter
      |
    ```
    
    to
    
    ```
    error: foo
     --> test.rs:3:6
      |
    3 |   a { b { c } d }
      |   ----^^^^^^^----
      |       |
      |       `b` is a good letter
    ```
    
    from
    
    ```
    error: foo
     --> test.rs:3:6
      |
    3 |   a { b { c } d }
      |   ^^^^-------^^^^
      |   |   |
      |   |
      |   `a` is a good letter
    ```
    
    to
    
    ```
    error: foo
     --> test.rs:3:6
      |
    3 |   a { b { c } d }
      |   ^^^^-------^^^^ `a` is a good letter
    ```
    
    and from
    
    ```
    error: foo
     --> test.rs:3:6
      |
    3 |   a { b { c } d }
      |   ^^^^-------^^^^
      |   |   |
      |   |
      |
    ```
    
    to
    
    ```
    error: foo
     --> test.rs:3:6
      |
    3 |   a { b { c } d }
      |   ^^^^-------^^^^
    ```
    r? @nikomatsakis
    cc @jonathandturner, @GuillaumeGomez, @nrc
rustc 1.15.0-nightly (daf8c1dfc 2016-12-05)
-rwxr-xr-x 1 root root 9432 Dec  6 15:39 /usr/local/bin/rustc
rustc: ./regex-0.1.80@050-expand
git apply 050-expand.diff
find . -name "*.rs" | xargs touch
git diff
diff --git a/regex-0.1.80/src/compile.rs b/regex-0.1.80/src/compile.rs
index 9db743f..9a32d30 100644
--- a/regex-0.1.80/src/compile.rs
+++ b/regex-0.1.80/src/compile.rs
@@ -137,6 +137,8 @@ impl Compiler {
     }
 
     fn compile_one(mut self, expr: &Expr) -> result::Result<Program, Error> {
+        {} // @030
+
         // If we're compiling a forward DFA and we aren't anchored, then
         // add a `.*?` before the first capture group.
         // Other matching engines handle this by baking the logic into the
diff --git a/regex-0.1.80/src/expand.rs b/regex-0.1.80/src/expand.rs
index 9bea703..b4ae1ab 100644
--- a/regex-0.1.80/src/expand.rs
+++ b/regex-0.1.80/src/expand.rs
@@ -5,6 +5,7 @@ use memchr::memchr;
 use bytes::Captures;
 
 pub fn expand(caps: &Captures, mut replacement: &[u8], dst: &mut Vec<u8>) {
+    { }
     while !replacement.is_empty() {
         match memchr(b'$', replacement) {
             None => break,
@@ -84,6 +85,7 @@ fn find_cap_ref(mut replacement: &[u8]) -> Option<CaptureRef> {
 }
 
 fn is_valid_cap_letter(b: &u8) -> bool {
+    { }
     match *b {
         b'0' ... b'9' | b'a' ... b'z' | b'A' ... b'Z' | b'_' => true,
         _ => false,
RUSTFLAGS="-Z incremental=incr" cargo rustc  -- \
  -Ztime-passes -Zinput-stats -Z incremental-info
makefile:34: recipe for target 'all@050-expand' failed
done
