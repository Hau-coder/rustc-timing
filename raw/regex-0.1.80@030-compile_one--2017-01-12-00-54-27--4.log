commit 408c2f7827be838aadcd05bd041dab94388af35d
Merge: 2782e8f 0dffc1e
Author: bors <bors@rust-lang.org>
Date:   Thu Jan 12 05:14:50 2017 +0000

    Auto merge of #37926 - bluss:from-utf8-small-simplification, r=sfackler
    
    UTF-8 validation: Compute block end upfront
    
    Simplify the conditional used for ensuring that the whole word loop is
    only used if there are at least two whole words left to read.
    
    This makes the function slightly smaller and simpler, a 0-5% reduction
    in runtime for various test cases.
rustc 1.15.0-nightly (daf8c1dfc 2016-12-05)
-rwxr-xr-x 1 root root 9432 Dec  6 15:39 /usr/local/bin/rustc
rustc: ./regex-0.1.80@030-compile_one
git apply 030-compile_one.diff
find . -name "*.rs" | xargs touch
git diff
diff --git a/regex-0.1.80/src/compile.rs b/regex-0.1.80/src/compile.rs
index 9db743f..9a32d30 100644
--- a/regex-0.1.80/src/compile.rs
+++ b/regex-0.1.80/src/compile.rs
@@ -137,6 +137,8 @@ impl Compiler {
     }
 
     fn compile_one(mut self, expr: &Expr) -> result::Result<Program, Error> {
+        {} // @030
+
         // If we're compiling a forward DFA and we aren't anchored, then
         // add a `.*?` before the first capture group.
         // Other matching engines handle this by baking the logic into the
RUSTFLAGS="-Z incremental=incr" cargo rustc  -- \
  -Ztime-passes -Zinput-stats -Z incremental-info
makefile:18: recipe for target 'all@030-compile_one' failed
done
