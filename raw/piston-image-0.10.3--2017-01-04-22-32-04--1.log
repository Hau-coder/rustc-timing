commit 80745e2a2323d47756c2afdd0d2584094ce35604
Merge: 5d994d8 1a040b3
Author: bors <bors@rust-lang.org>
Date:   Thu Jan 5 04:01:35 2017 +0000

    Auto merge of #38731 - alexcrichton:supafast-cross-dist, r=brson
    
    rustbuild: Quickly `dist` cross-host compilers
    
    This commit optimizes the compile time for creating tarballs of cross-host
    compilers and as a proof of concept adds two to the standard Travis matrix. Much
    of this commit is further refactoring and refining of the `step.rs` definitions
    along with the interpretation of `--target` and `--host` flags. This has gotten
    confusing enough that I've also added a small test suite to
    `src/bootstrap/step.rs` to ensure what we're doing works and doesn't regress.
    
    After this commit when you execute:
    
        ./x.py dist --host $MY_HOST --target $MY_HOST
    
    the build system will compile two compilers. The first is for the build platform
    and the second is for the host platform. This second compiler is then packaged
    up and placed into `build/dist` and is ready to go. With a fully cached LLVM and
    docker image I was able to create a cross-host compiler in around 20 minutes
    locally.
    
    Eventually we plan to add a whole litany of cross-host entries to the Travis
    matrix, but for now we're just adding a few before we eat up all the extra
    capacity.
    
    cc #38531
rustc 1.15.0-nightly (daf8c1dfc 2016-12-05)
-rwxr-xr-x 1 root root 9432 Dec  6 15:39 /usr/local/bin/rustc
rustc: ./piston-image-0.10.3
cargo rustc  -- -Ztime-passes -Zinput-stats
makefile:4: recipe for target 'all' failed
done
